{"version":3,"sources":["ImageTexture.js"],"names":[],"mappings":";;;;;;;;;;;;;;;IACM,YAAY;YAAZ,YAAY;;AACJ,WADR,YAAY,CACH,GAAG,EAAE,KAAK,EAAE;0BADrB,YAAY;;AAEd,+BAFE,YAAY,6CAER,IAAI,EAAE,KAAK,EAAE;;AAEnB,QAAI,OAAO,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;AACpD,WAAO,CAAC,UAAU,GAAG,GAAG,CAAC,KAAK,CAAC;AAC/B,WAAO,CAAC,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC;AACjC,WAAO,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC;AAC3B,WAAO,CAAC,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC;;AAE7B,WAAO,CAAC,UAAU,GAAG,CAAC,CAAC;AACvB,WAAO,CAAC,YAAY,GAAG,OAAO,CAAC,OAAO,CAAC,sBAAsB,CAAC;AAC9D,QAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;AACxB,QAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;;AAE9B,QAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;GACpB;;eAhBG,YAAY;;WAkBP,kBAAC,GAAG,EAAE;AACb,UAAI,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC;AACzC,QAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC7C,QAAE,CAAC,WAAW,CAAC,EAAE,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC;;;AAG1C,UAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;AAC1B,UAAE,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;AACzE,UAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;OACnE,MAAM;AACL,UAAE,CAAC,aAAa,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;OAC1E;AACD,QAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AACpC,UAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;KAC9B;;;SAhCG,YAAY;GAAS,OAAO,CAAC,OAAO;;qBAmC3B,YAAY","file":"ImageTexture.js","sourcesContent":["/*global BABYLON*/\nclass ImageTexture extends BABYLON.Texture {\n  constructor (img, scene) {\n    super(null, scene);\n\n    var texture = scene.getEngine()._gl.createTexture();\n    texture._baseWidth = img.width;\n    texture._baseHeight = img.height;\n    texture._width = img.width;\n    texture._height = img.height;\n\n    texture.references = 1;\n    texture.samplingMode = BABYLON.Texture.TRILINEAR_SAMPLINGMODE;\n    this._texture = texture;\n    this._texture.isReady = false;\n\n    this.setImage(img);\n  }\n\n  setImage (img) {\n    var gl = this.getScene().getEngine()._gl;\n    gl.bindTexture(gl.TEXTURE_2D, this._texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\n\n    // mop: it is the first call\n    if (!this._texture.isReady) {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    } else {\n      gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, gl.RGBA, gl.UNSIGNED_BYTE, img);\n    }\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    this._texture.isReady = true;\n  }\n}\n\nexport default ImageTexture;\n"],"sourceRoot":"/source/"}